{"ast":null,"code":"var _jsxFileName = \"/home/dev/\\xC1rea de Trabalho/DevProjetos/Projetos/GoBarber/Frontend/src/pages/Dashboard/index.tsx\";\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Container, Header, HeaderContent, Profile, Schendule, Content, Calendar, NextAppointment, Section, Appointment } from './styles';\nimport logoImg from \"../../assets/logo.svg\";\nimport { FiClock, FiPower } from 'react-icons/fi';\nimport { useAuth } from '../../Hooks/Auth';\nimport DayPicker from 'react-day-picker';\nimport 'react-day-picker/lib/style.css';\nimport api from '../../services/api';\nimport { isToday, format, parseISO, isAfter } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\n\nconst Dashboard = () => {\n  const {\n    SignOut,\n    user\n  } = useAuth();\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [monthAvailability, setMonthAvailability] = useState([]);\n  const [appointments, setAppointments] = useState([]);\n  const handleDateChange = useCallback((day, modifiers) => {\n    if (modifiers.available) {\n      setSelectedDate(day);\n    }\n  }, []);\n  const handleMonthChange = useCallback(month => {\n    setCurrentMonth(month);\n  }, []);\n  useEffect(() => {\n    api.get(`/providers/${user.id}/month-availability`, {\n      params: {\n        year: currentMonth.getFullYear(),\n        month: currentMonth.getMonth() + 1\n      }\n    }).then(response => {\n      setMonthAvailability(response.data);\n    });\n  }, [currentMonth, user.id]);\n  useEffect(() => {\n    api.get('appointments/me', {\n      params: {\n        year: selectedDate.getFullYear(),\n        month: selectedDate.getMonth() + 1,\n        day: selectedDate.getDate()\n      }\n    }).then(response => {\n      const appoitnmentsFormatted = response.data.map(appointment => {\n        return { ...appointment,\n          hourFormatted: format(parseISO(appointment.date), 'HH:mm')\n        };\n      });\n      setAppointments(appoitnmentsFormatted);\n    });\n  }, [selectedDate]);\n  const disabledDays = useMemo(() => {\n    const dates = monthAvailability.filter(monthDay => monthDay.availability === false).map(monthDay => {\n      const year = currentMonth.getFullYear();\n      const month = currentMonth.getMonth();\n      return new Date(year, month, monthDay.day);\n    });\n    return dates;\n  }, [currentMonth, monthAvailability]);\n  const selectedDateAsText = useMemo(() => {\n    return format(selectedDate, \"'Dia' dd 'de' MMMM\", {\n      locale: ptBR\n    });\n  }, [selectedDate]);\n  const selectedWeekDay = useMemo(() => {\n    return format(selectedDate, 'cccc', {\n      locale: ptBR\n    });\n  }, [selectedDate]);\n  const morningAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() < 12;\n    });\n  }, [appointments]);\n  const afternoonAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() >= 12;\n    });\n  }, [appointments]);\n  const nextAppointment = useMemo(() => {\n    return appointments.find(appointment => {\n      isAfter(parseISO(appointment.date), new Date());\n    });\n  }, [appointments]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(HeaderContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logoImg,\n    alt: \"GoBarber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Profile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar_url,\n    alt: user.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Bem Vindo\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, user.name))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: SignOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FiPower, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Schendule, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"Horarios Agendados\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, isToday(selectedDate) && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 39\n    }\n  }, \"Hoje\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, selectedDateAsText), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, `${selectedWeekDay}-feira`)), isToday(selectedDate) && nextAppointment && /*#__PURE__*/React.createElement(NextAppointment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, \"Agendamento a Seguir\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: nextAppointment.user.avatar_url,\n    alt: nextAppointment.user.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, nextAppointment.user.name), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 24\n    }\n  }), \" \", nextAppointment.hourFormatted, \" \"))), /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, \"Manha\"), morningAppointments.map(appointment => /*#__PURE__*/React.createElement(Appointment, {\n    key: appointment.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }), appointment.hourFormatted), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: appointment.user.avatar_url,\n    alt: appointment.user.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, appointment.user.name))))), /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, \"Tarde\"), afternoonAppointments.map(appointment => /*#__PURE__*/React.createElement(Appointment, {\n    key: appointment.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }), appointment.hourFormatted), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: appointment.user.avatar_url,\n    alt: appointment.user.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, appointment.user.name)))))), /*#__PURE__*/React.createElement(Calendar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DayPicker, {\n    weekdaysShort: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'],\n    fromMonth: new Date(),\n    disabledDays: [{\n      daysOfWeek: [0, 6]\n    }, ...disabledDays],\n    selectedDays: selectedDate,\n    modifiers: {\n      available: {\n        daysOfWeek: [1, 2, 3, 4, 5]\n      }\n    },\n    onDayClick: handleDateChange,\n    onMonthChange: handleMonthChange,\n    months: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/home/dev/Área de Trabalho/DevProjetos/Projetos/GoBarber/Frontend/src/pages/Dashboard/index.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","Container","Header","HeaderContent","Profile","Schendule","Content","Calendar","NextAppointment","Section","Appointment","FiClock","FiPower","useAuth","DayPicker","api","isToday","format","parseISO","isAfter","ptBR","Dashboard","SignOut","user","selectedDate","setSelectedDate","Date","currentMonth","setCurrentMonth","monthAvailability","setMonthAvailability","appointments","setAppointments","handleDateChange","day","modifiers","available","handleMonthChange","month","get","id","params","year","getFullYear","getMonth","then","response","data","getDate","appoitnmentsFormatted","map","appointment","hourFormatted","date","disabledDays","dates","filter","monthDay","availability","selectedDateAsText","locale","selectedWeekDay","morningAppointments","getHours","afternoonAppointments","nextAppointment","find","logoImg","avatar_url","name","daysOfWeek"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Container, Header, HeaderContent, Profile, Schendule, Content, Calendar, NextAppointment, Section, Appointment } from './styles';\nimport logoImg from '../../assets/logo.svg';\nimport { FiClock, FiPower } from 'react-icons/fi';\nimport { useAuth } from '../../Hooks/Auth';\nimport DayPicker, { DayModifiers } from 'react-day-picker';\nimport 'react-day-picker/lib/style.css'\nimport api from '../../services/api';\nimport { isToday, format, parseISO, isAfter } from 'date-fns';\nimport ptBR from 'date-fns/locale/pt-BR';\n\n\ninterface MonthAvailabilityItem {\n  day: number;\n  availability: boolean;\n}\n\ninterface Appointments {\n  id: string;\n  date: string;\n  hourFormatted: string;\n  user: {\n    name: string;\n    avatar_url: string;\n  }\n}\n\nconst Dashboard: React.FC = () => {\n  const { SignOut, user } = useAuth();\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentMonth, setCurrentMonth] = useState(new Date())\n  const [monthAvailability, setMonthAvailability] = useState<MonthAvailabilityItem[]>([]);\n  const [appointments, setAppointments] = useState<Appointments[]>([]);\n\n\n  const handleDateChange = useCallback((day: Date, modifiers: DayModifiers) => {\n    if (modifiers.available) {\n      setSelectedDate(day);\n    }\n  }, []);\n\n  const handleMonthChange = useCallback((month: Date) => {\n    setCurrentMonth(month);\n  }, []);\n\n  useEffect(() => {\n    api.get(`/providers/${user.id}/month-availability`, {\n      params: {\n        year: currentMonth.getFullYear(),\n        month: currentMonth.getMonth() + 1\n      }\n    }).then(response => {\n      setMonthAvailability(response.data);\n    })\n  }, [currentMonth, user.id]);\n\n  useEffect(() => {\n    api.get<Appointments[]>('appointments/me', {\n      params: {\n        year: selectedDate.getFullYear(),\n        month: selectedDate.getMonth() + 1,\n        day: selectedDate.getDate(),\n      }\n    }).then(response => {\n      const appoitnmentsFormatted = response.data.map(appointment => {\n        return {\n          ...appointment,\n          hourFormatted: format(parseISO(appointment.date), 'HH:mm'),\n        }\n      })\n      setAppointments(appoitnmentsFormatted);\n    })\n  }, [selectedDate]);\n\n  const disabledDays = useMemo(() => {\n    const dates = monthAvailability\n      .filter(monthDay => monthDay.availability === false)\n      .map(monthDay => {\n        const year = currentMonth.getFullYear();\n        const month = currentMonth.getMonth();\n\n        return new Date(year, month, monthDay.day);\n      });\n\n    return dates;\n  }, [currentMonth, monthAvailability]);\n\n  const selectedDateAsText = useMemo(() => {\n    return format(selectedDate, \"'Dia' dd 'de' MMMM\", {\n      locale: ptBR\n    })\n  }, [selectedDate]);\n\n  const selectedWeekDay = useMemo(() => {\n    return format(selectedDate, 'cccc', {\n      locale: ptBR,\n    });\n  }, [selectedDate]);\n\n  const morningAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() < 12;\n    })\n  }, [appointments]);\n  const afternoonAppointments = useMemo(() => {\n    return appointments.filter(appointment => {\n      return parseISO(appointment.date).getHours() >= 12;\n    })\n  }, [appointments]);\n\n  const nextAppointment = useMemo(() => {\n    return appointments.find(appointment => {\n      isAfter(parseISO(appointment.date), new Date());\n    })\n\n  }, [appointments]);\n\n  return (\n    <Container>\n      <Header>\n        <HeaderContent>\n          <img src={logoImg} alt=\"GoBarber\" />\n          <Profile>\n            <img src={user.avatar_url} alt={user.name} />\n            <div>\n              <span>Bem Vindo</span>\n              <strong>{user.name}</strong>\n            </div>\n          </Profile>\n\n          <button type=\"button\" onClick={SignOut}>\n            <FiPower />\n          </button>\n        </HeaderContent>\n      </Header>\n\n      <Content>\n        <Schendule>\n          <h1>Horarios Agendados</h1>\n          <p>\n            {isToday(selectedDate) && <span>Hoje</span>}\n            <span>{selectedDateAsText}</span>\n            <span>{`${selectedWeekDay}-feira`}</span>\n          </p>\n          {isToday(selectedDate) && nextAppointment && (\n            <NextAppointment>\n              <strong>Agendamento a Seguir</strong>\n              <div>\n                <img src={nextAppointment.user.avatar_url} alt={nextAppointment.user.name} />\n                <strong>{nextAppointment.user.name}</strong>\n                <span> <FiClock /> {nextAppointment.hourFormatted} </span>\n              </div>\n            </NextAppointment>\n          )}\n\n          <Section>\n            <strong>Manha</strong>\n\n            {morningAppointments.map(appointment => (\n              <Appointment key={appointment.id}>\n                <span>\n                  <FiClock />\n                  {appointment.hourFormatted}\n                </span>\n                <div>\n                  <img src={appointment.user.avatar_url} alt={appointment.user.name} />\n                  <strong>{appointment.user.name}</strong>\n                </div>\n              </Appointment>\n\n            ))}\n          </Section>\n\n          <Section>\n            <strong>Tarde</strong>\n\n            {afternoonAppointments.map(appointment => (\n              <Appointment key={appointment.id}>\n                <span>\n                  <FiClock />\n                  {appointment.hourFormatted}\n                </span>\n                <div>\n                  <img src={appointment.user.avatar_url} alt={appointment.user.name} />\n                  <strong>{appointment.user.name}</strong>\n                </div>\n              </Appointment>\n\n            ))}\n          </Section>\n        </Schendule>\n        <Calendar >\n          <DayPicker\n            weekdaysShort={['D', 'S', 'T', 'Q', 'Q', 'S', 'S']}\n            fromMonth={new Date()}\n            disabledDays={[{ daysOfWeek: [0, 6] }, ...disabledDays]}\n            selectedDays={selectedDate}\n            modifiers={{\n              available: { daysOfWeek: [1, 2, 3, 4, 5] }\n            }}\n            onDayClick={handleDateChange}\n            onMonthChange={handleMonthChange}\n            months={[\n              'Janeiro',\n              'Fevereiro',\n              'Março',\n              'Abril',\n              'Maio',\n              'Junho',\n              'Julho',\n              'Agosto',\n              'Setembro',\n              'Outubro',\n              'Novembro',\n              'Dezembro'\n            ]}\n          />\n        </Calendar>\n      </Content>\n    </Container>\n  );\n};\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}